1021 Remove Outermost Parentheses
=======================
[Problem description](https://leetcode.com/problems/remove-outermost-parentheses/)

#### Difficulty
<span style="color:green">Easy</span>

#### Keywords
- Stack

#### Idea
The basic idea is to use a stack to keep track of the positions of the left parenthesis and perform the removal **when the last element in the stack to be popped**. The removal is done *in-place* by removing the characters by positions, since positions of both sides are known when the last element being popped. The gotcha is that all the characters are shifted to left by 2 after the removal but the character positions remain unchanged during the iteration. Therefore, an extra variable is needed to keep track of the necessary shift during the removal, and shift the characters accordingly for subsequent removals. 

#### Complexity
- Runtime: O(N)
- Space: O(1)

#### LC performance
- Runtime: 56 ms
- Memory usage: 13.2 MB

#### Code
```python
class Solution:
    def removeOuterParentheses(self, S: str) -> str:
        from collections import deque
        
        stack, shift = deque(), 0
        for i, c in enumerate(S):
            if c == '(':
                stack += i,
                continue
            l = stack.pop() - shift
            r = i - shift
            if not stack:
                S = S[:l] + S[l + 1: r] + S[r + 1:]
                shift += 2
        return S
```